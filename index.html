<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1,width=device-width">
  <link rel="stylesheet" href="css/leaflet.css">
  <link rel="stylesheet" href="css/qgis2web.css">
  <style>
    html, body, #map {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
    }
  </style>
  <title>Mappa HD</title>
</head>
<body>
  <div id="map"></div>

  <script src="js/leaflet.js"></script>
  <script src="data/Insediamenti_1.js"></script>

  <script>
    // Inizializza la mappa
    var map = L.map('map', {
      center: [45.8, 9.1], // cambia centro se serve
      zoom: 10,
      minZoom: 0,
      maxZoom: 17
    });

    // Raster dai tiles (512px fino a z=15)
    var tilesRaster = L.tileLayer('./tiles_raster/{z}/{x}/{y}.png', {
      attribution: '© la tua mappa',
      minZoom: 0,
      maxZoom: 17,        // utente può zoomare fino a 17
      maxNativeZoom: 16,  // ⬅️ i tiles 512px a z=15 li trattiamo come un livello extra
      tileSize: 512,      // molto importante!
      tms: false,
      noWrap: true
    }).addTo(map);

    // Layer vettoriale (esempio con i tuoi punti)
    var layer_Insediamenti = L.geoJson(json_Insediamenti_1, {
      onEachFeature: function (feature, layer) {
        var p = feature.properties || {};
        var html = '<table>'
          + '<tr><th>Nome</th><td>' + (p.Nome || '') + '</td></tr>'
          + '<tr><th>Tipo</th><td>' + (p.Tipo || '') + '</td></tr>'
          + '<tr><th>Descrizione</th><td>' + (p.Descrizione || '') + '</td></tr>'
          + '<tr><th>Livello</th><td>' + (p.Livello || '') + '</td></tr>'
          + '<tr><th>Regione</th><td>' + (p.Regione || '') + '</td></tr>'
          + '</table>';
        layer.bindPopup(html);
      },
      pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
          radius: 4,
          fillColor: 'rgba(190,207,80,1.0)',
          color: '#232323',
          weight: 1,
          opacity: 1,
          fillOpacity: 1
        });
      }
    }).addTo(map);

  </script>
</body>
</html>
